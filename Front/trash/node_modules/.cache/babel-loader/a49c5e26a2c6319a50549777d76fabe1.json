{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ilyas\\\\Desktop\\\\React\\\\apeiron\\\\my-app\\\\src\\\\component\\\\login\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { NavLink, useLocation, useNavigate } from 'react-router-dom';\nimport RemoveCookie from '../../hook/removeCookie';\nimport SetCookie from '../../hook/setCookie';\nimport { useAuth } from '../../hook/useAuth';\nimport store from '../../Redux/redux-store';\nimport c from './Login.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = props => {\n  _s();\n  var _location$state, _location$state$from;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    signIn\n  } = useAuth();\n  const fromPage = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || '/';\n  async function SendInformationOnServerT() {\n    const json = JSON.stringify({\n      \"login\": newAuthElement.current.value,\n      \"password\": newPassElement.current.value\n    });\n    await axios.post('http://apeiron-test.kz/auth/login', json).then(response => {\n      props.updateNewTokenText(response.data.token);\n      props.updateUserAccessText(response.data.UserAccess);\n      RemoveCookie('usrin');\n      SetCookie('usrin', JSON.stringify(response.data));\n    });\n    onAddPost();\n    Authtorization();\n  }\n  const Authtorization = () => {\n    const AuthAccess = store.getState().AuthData.UserAcc['0'];\n    signIn(AuthAccess, () => navigate(fromPage, {\n      replace: true\n    }));\n  };\n  let newAuthElement = /*#__PURE__*/React.createRef();\n  let newPassElement = /*#__PURE__*/React.createRef();\n  let onAddPost = () => {\n    props.addAuth();\n  };\n  let onAuthChange = () => {\n    let text = newAuthElement.current.value;\n    props.updataNewAuthText(text);\n  };\n  let onPassChange = () => {\n    let pass = newPassElement.current.value;\n    props.updateNewPassText(pass);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: c.Main,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Apeiron\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: c.MainBlockInner,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: c.RegisterBlock,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Authorization\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: newAuthElement,\n          onChange: onAuthChange,\n          type: \"text\",\n          name: \"login\",\n          placeholder: \"Login\",\n          value: props.newAuthText,\n          className: c.RegisterBlockInner\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: newPassElement,\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"password\",\n          value: props.newPassText,\n          className: c.RegisterBlockInner,\n          onChange: onPassChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: SendInformationOnServerT,\n          className: c.RegisterBlockBtn,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/register\",\n          className: c.GoToRegister,\n          children: \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043D\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"7vNZ7cpt6HA4sb3UkAkXKVJ6Gv4=\", false, function () {\n  return [useNavigate, useLocation, useAuth];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["axios","React","useEffect","useState","NavLink","useLocation","useNavigate","RemoveCookie","SetCookie","useAuth","store","c","Login","props","navigate","location","signIn","fromPage","state","from","pathname","SendInformationOnServerT","json","JSON","stringify","newAuthElement","current","value","newPassElement","post","then","response","updateNewTokenText","data","token","updateUserAccessText","UserAccess","onAddPost","Authtorization","AuthAccess","getState","AuthData","UserAcc","replace","createRef","addAuth","onAuthChange","text","updataNewAuthText","onPassChange","pass","updateNewPassText","Main","MainBlockInner","RegisterBlock","newAuthText","RegisterBlockInner","newPassText","RegisterBlockBtn","GoToRegister"],"sources":["C:/Users/Ilyas/Desktop/React/apeiron/my-app/src/component/login/Login.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { NavLink, useLocation, useNavigate } from 'react-router-dom';\r\nimport RemoveCookie from '../../hook/removeCookie';\r\nimport SetCookie from '../../hook/setCookie';\r\nimport { useAuth } from '../../hook/useAuth';\r\nimport store from '../../Redux/redux-store';\r\nimport c from './Login.module.css';\r\n\r\nconst Login = (props) => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const {signIn} = useAuth();\r\n\r\n    const fromPage = location.state?.from?.pathname || '/';\r\n\r\n    async function SendInformationOnServerT(){\r\n        const json = JSON.stringify({ \r\n            \"login\": newAuthElement.current.value,\r\n            \"password\": newPassElement.current.value,\r\n         });\r\n        await  axios.post('http://apeiron-test.kz/auth/login', json).then(response => {\r\n            props.updateNewTokenText(response.data.token);\r\n            props.updateUserAccessText(response.data.UserAccess);\r\n            RemoveCookie('usrin');\r\n            SetCookie('usrin', JSON.stringify(response.data));\r\n            })\r\n        onAddPost();\r\n        Authtorization()\r\n\r\n    }\r\n\r\n    const Authtorization = () =>{\r\n        const AuthAccess = store.getState().AuthData.UserAcc['0'];\r\n        signIn(AuthAccess, () => navigate(fromPage,{replace:true}));\r\n\r\n    }\r\n\r\n    let newAuthElement = React.createRef();\r\n    let newPassElement = React.createRef();\r\n  \r\n    let onAddPost = () => {\r\n        props.addAuth();\r\n    }\r\n  \r\n    let onAuthChange = () =>{\r\n        let text = newAuthElement.current.value;\r\n        props.updataNewAuthText(text);\r\n    }\r\n\r\n    let onPassChange = () =>{\r\n        let pass = newPassElement.current.value;\r\n        props.updateNewPassText(pass);\r\n    }\r\n\r\n    return (\r\n    <div className={c.Main}>\r\n        <h1>Apeiron</h1>\r\n        <div className={c.MainBlockInner}>\r\n            <div className={c.RegisterBlock}>\r\n                <h2>Authorization</h2>\r\n\r\n                {/* <input \r\n                    ref={newPostElement}\r\n                    type=\"text\" \r\n                    name='login' \r\n                    placeholder='Login'\r\n                    value={Login} \r\n                    className={c.RegisterBlockInner}\r\n                    onChange={(event) => setLogin(event.target.value)}\r\n                /> */}\r\n\r\n                <input \r\n                    ref={newAuthElement}\r\n                    onChange={onAuthChange}\r\n                    type=\"text\" \r\n                    name='login' \r\n                    placeholder='Login'\r\n                    value={props.newAuthText}\r\n                    className={c.RegisterBlockInner}\r\n                />\r\n\r\n                <input \r\n                    ref={newPassElement}\r\n                    type=\"password\" \r\n                    name='password' \r\n                    placeholder='password'\r\n                    value={props.newPassText} \r\n                    className={c.RegisterBlockInner}\r\n                    onChange={onPassChange}\r\n                />\r\n\r\n                <div>{/*Date of Birth*/}</div>\r\n                <button onClick={SendInformationOnServerT} className={c.RegisterBlockBtn}>Login</button> \r\n                <a href=\"/register\" className={c.GoToRegister}>Перейти на страницу регистраций</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n      \r\n    \r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}