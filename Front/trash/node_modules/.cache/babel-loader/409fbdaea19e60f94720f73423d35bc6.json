{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ilyas\\\\Desktop\\\\React\\\\apeiron\\\\my-app\\\\src\\\\hoc\\\\RequireAuth.jsx\",\n  _s = $RefreshSig$();\nimport { useLocation, Navigate } from \"react-router\";\nimport axios from 'axios';\nimport GetCookie from \"../hook/getCookie\";\nimport { useAuth } from \"../hook/useAuth\";\nimport store from \"../Redux/redux-store\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RequireAuth = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const location = useLocation();\n  const {\n    user\n  } = useAuth();\n  const copyUser = {\n    ...user\n  };\n  const AuthAccess = copyUser['UserAccess'];\n  const Cookie = JSON.parse(GetCookie('usrin'));\n  const CookieAccess = Cookie['UserAccess'];\n  let ServerAccess = {};\n\n  // async function SendInformationOnServerT(){\n  //     await  axios.get(`http://apeiron-test.kz/userAccess`,{\n  //         headers:{\n  //             Authorization: 'Bearer 7b1e42f0ca015753622fc094e4944fd5'\n  //         }\n  //     }).then(response => {\n  //             console.log(response);\n  //             ServerAccess = response.data.UserAccess;\n  //         })\n  //     console.log(ServerAccess);\n  //     if((ServerAccess)) {\n  //         return <Navigate to='/login' state={{from:location}}></Navigate>\n  //     }\n  //     return children;\n\n  // }\n\n  // console.log(CookieAccess);\n  // console.log(!AuthAccess);\n\n  // сравнение по доступу из куки с помощью переменной CookieAccess \n  // на данный момент работает плохо\n\n  if (!AuthAccess) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 16\n    }, this);\n  }\n  return children;\n\n  // SendInformationOnServerT();\n  // console.log(store.getState());\n\n  // console.log(user)\n\n  // console.log(copyUser['UserAccess']);\n  // console.log(Cookie['UserAccess']);\n  // console.log(!user);\n};\n_s(RequireAuth, \"D3xuCkTD4cAm8c2GRqbdGuYBpOs=\", false, function () {\n  return [useLocation, useAuth];\n});\n_c = RequireAuth;\nexport { RequireAuth };\nvar _c;\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"names":["useLocation","Navigate","axios","GetCookie","useAuth","store","RequireAuth","children","location","user","copyUser","AuthAccess","Cookie","JSON","parse","CookieAccess","ServerAccess","from"],"sources":["C:/Users/Ilyas/Desktop/React/apeiron/my-app/src/hoc/RequireAuth.jsx"],"sourcesContent":["import { useLocation, Navigate } from \"react-router\";\r\nimport axios from 'axios';\r\nimport GetCookie from \"../hook/getCookie\";\r\nimport { useAuth } from \"../hook/useAuth\";\r\nimport store from \"../Redux/redux-store\";\r\n\r\nconst RequireAuth = ({children}) =>{\r\n    const location = useLocation();\r\n    const {user} = useAuth();\r\n    const copyUser= {...user};\r\n    const AuthAccess = copyUser['UserAccess'];\r\n    const Cookie = JSON.parse(GetCookie('usrin'));\r\n    const CookieAccess = Cookie['UserAccess'];\r\n    let ServerAccess = {};\r\n\r\n    // async function SendInformationOnServerT(){\r\n    //     await  axios.get(`http://apeiron-test.kz/userAccess`,{\r\n    //         headers:{\r\n    //             Authorization: 'Bearer 7b1e42f0ca015753622fc094e4944fd5'\r\n    //         }\r\n    //     }).then(response => {\r\n    //             console.log(response);\r\n    //             ServerAccess = response.data.UserAccess;\r\n    //         })\r\n    //     console.log(ServerAccess);\r\n    //     if((ServerAccess)) {\r\n    //         return <Navigate to='/login' state={{from:location}}></Navigate>\r\n    //     }\r\n    //     return children;\r\n\r\n    // }\r\n\r\n    // console.log(CookieAccess);\r\n    // console.log(!AuthAccess);\r\n\r\n    // сравнение по доступу из куки с помощью переменной CookieAccess \r\n    // на данный момент работает плохо\r\n\r\n    if(!AuthAccess) {\r\n        return <Navigate to='/login' state={{from:location}}></Navigate>\r\n    }\r\n    return children;\r\n\r\n    // SendInformationOnServerT();\r\n    // console.log(store.getState());\r\n\r\n    // console.log(user)\r\n\r\n\r\n\r\n    // console.log(copyUser['UserAccess']);\r\n    // console.log(Cookie['UserAccess']);\r\n    // console.log(!user);\r\n   \r\n    \r\n}\r\n\r\nexport {RequireAuth};"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,QAAQ,QAAQ,cAAc;AACpD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,mBAAmB;AACzC,SAASC,OAAO,QAAQ,iBAAiB;AACzC,OAAOC,KAAK,MAAM,sBAAsB;AAAC;AAEzC,MAAMC,WAAW,GAAG,QAAe;EAAA;EAAA,IAAd;IAACC;EAAQ,CAAC;EAC3B,MAAMC,QAAQ,GAAGR,WAAW,EAAE;EAC9B,MAAM;IAACS;EAAI,CAAC,GAAGL,OAAO,EAAE;EACxB,MAAMM,QAAQ,GAAE;IAAC,GAAGD;EAAI,CAAC;EACzB,MAAME,UAAU,GAAGD,QAAQ,CAAC,YAAY,CAAC;EACzC,MAAME,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACX,SAAS,CAAC,OAAO,CAAC,CAAC;EAC7C,MAAMY,YAAY,GAAGH,MAAM,CAAC,YAAY,CAAC;EACzC,IAAII,YAAY,GAAG,CAAC,CAAC;;EAErB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;;EAEA;EACA;;EAEA,IAAG,CAACL,UAAU,EAAE;IACZ,oBAAO,QAAC,QAAQ;MAAC,EAAE,EAAC,QAAQ;MAAC,KAAK,EAAE;QAACM,IAAI,EAACT;MAAQ;IAAE;MAAA;MAAA;MAAA;IAAA,QAAY;EACpE;EACA,OAAOD,QAAQ;;EAEf;EACA;;EAEA;;EAIA;EACA;EACA;AAGJ,CAAC;AAAA,GAjDKD,WAAW;EAAA,QACIN,WAAW,EACbI,OAAO;AAAA;AAAA,KAFpBE,WAAW;AAmDjB,SAAQA,WAAW;AAAE;AAAA"},"metadata":{},"sourceType":"module"}